{%extends "blog/base.html"%}

{%block title%} Resultado de búsqueda{%endblock%}

{%block contenido%}

<h2 class= "mb-4"> Resultado de la búsqueda </h2>

<form id="buscar" method= "GET" action="{% url 'buscar_posts' %}" class="row g-3 mb-4">
    <div class="col-md-8"><input type= "search" name="q" class="form-control" placeholder="Buscar publicaciones..."></div>
    <div class="col-md-4 d-grid"><button class="btn btn-primary" type="submit"><i class="fa fa-search me-2"></i> Buscar </button> </div>
</form>

{% if query == "" %}
 <p class="text-muted">No se ha realizado ninguna búsqueda.</p>
{% endif %}

<div class= "row">
    {% if resultados %}
    {% for post in resultados %} <!--Iteramos sobre los posts-->
    <div class = "col-md-6 mb-4">
        <div class= "card shadow-sm border-0 ">
            <div class="card-body">
                <h4 class= "card-title">{{post.titulo}} </h4>
                <p class="text-muted">Publicado el {{post.fecha_publicacion|date:"d/m/Y"}} - Categoría: {{post.categoria.nombre}}</p>
                <p>{{post.contenido|truncatewords:20}}</p><!--Esto es para que muestre un resumen del contenido de 20 palabras-->
                <a href="{%url 'detalle_post' post.slug%}" class= "btn btn-primary">Ver detalles</a>

            </div>
        </div>
    </div>
    {% endfor %}
    {% else %}
    <p class="text-danger">No se encontraron resultados para tu búsqueda.</p>
    {% endif %}
  </div>
{%endblock%}